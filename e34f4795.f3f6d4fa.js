(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{166:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return r})),t.d(n,"metadata",(function(){return d})),t.d(n,"toc",(function(){return c})),t.d(n,"default",(function(){return l}));var o=t(3),a=t(7),i=(t(0),t(186)),r={title:"\u5be6\u4f5c Todo Item \u7de8\u8f2f\u529f\u80fd",keywords:["React Component"]},d={unversionedId:"bootcamp/week3/edit-todo-item",id:"bootcamp/week3/edit-todo-item",isDocsHomePage:!1,title:"\u5be6\u4f5c Todo Item \u7de8\u8f2f\u529f\u80fd",description:"\u5207\u63db isEdit \u72c0\u614b",source:"@site/docs/bootcamp/week3/edit-todo-item.md",slug:"/bootcamp/week3/edit-todo-item",permalink:"/react-bootcamp/docs/bootcamp/week3/edit-todo-item",editUrl:"https://github.com/pjchender/react-bootcamp/edit/main/docs/bootcamp/week3/edit-todo-item.md",version:"current",sidebar:"bootcamp",previous:{title:"Todo MVC \u5c08\u6848\u9023\u7d50",permalink:"/react-bootcamp/docs/bootcamp/week2/todo-mvc"},next:{title:"\u900f\u904e\u8207\u5f8c\u7aef API \u6574\u5408",permalink:"/react-bootcamp/docs/bootcamp/week3/api-integration"}},c=[{value:"\u5207\u63db isEdit \u72c0\u614b",id:"\u5207\u63db-isedit-\u72c0\u614b",children:[{value:"\u4fee\u6539 CSS",id:"\u4fee\u6539-css",children:[]},{value:"\u5efa\u7acb updateIsEdit \u65b9\u6cd5",id:"\u5efa\u7acb-updateisedit-\u65b9\u6cd5",children:[]}]},{value:"\u53d6\u5f97\u4f7f\u7528\u8005\u8f38\u5165\u7684\u5167\u5bb9",id:"\u53d6\u5f97\u4f7f\u7528\u8005\u8f38\u5165\u7684\u5167\u5bb9",children:[]},{value:"\u53d6\u5f97\u4f7f\u7528\u8005\u9ede\u64ca\u7684\u6309\u9375",id:"\u53d6\u5f97\u4f7f\u7528\u8005\u9ede\u64ca\u7684\u6309\u9375",children:[]},{value:"\u4fdd\u5b58\u7de8\u8f2f",id:"\u4fdd\u5b58\u7de8\u8f2f",children:[]},{value:"\u53d6\u6d88\u7de8\u8f2f",id:"\u53d6\u6d88\u7de8\u8f2f",children:[]}],s={toc:c};function l(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(o.a)({},s,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"\u5207\u63db-isedit-\u72c0\u614b"},"\u5207\u63db isEdit \u72c0\u614b"),Object(i.b)("h3",{id:"\u4fee\u6539-css"},"\u4fee\u6539 CSS"),Object(i.b)("p",null,"\u4fee\u6539 ",Object(i.b)("inlineCode",{parentName:"p"},".edit")," \u7684 class \u8b93\u7de8\u8f2f\u7684\u6a23\u5f0f\u66f4\u660e\u986f"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-scss",metastring:'{4,5,17-19} title="src/App.scss"',"{4,5,17-19}":!0,title:'"src/App.scss"'}),".task-item {\n  // ...\n  &.edit {\n    background: #fff3eb;\n    box-shadow: inset 0 0 0 1px #fff3eb;\n\n    .task-item-body {\n      .task-item-body-input {\n        display: block;\n      }\n\n      .task-item-body-text {\n        display: none;\n      }\n    }\n\n    .task-item-action .btn-destroy {\n      display: none;\n    }\n  }\n}\n")),Object(i.b)("h3",{id:"\u5efa\u7acb-updateisedit-\u65b9\u6cd5"},"\u5efa\u7acb updateIsEdit \u65b9\u6cd5"),Object(i.b)("p",null,"\u900f\u904e ",Object(i.b)("inlineCode",{parentName:"p"},"updateIsEdit")," \u4f86\u4fee\u6539 todoItem \u7684 ",Object(i.b)("inlineCode",{parentName:"p"},"isEdit")," \u72c0\u614b\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="src/App.js"',title:'"src/App.js"'}),"const App = () => {\n  const updateIsEdit = ({ id, isEdit }) => {\n    setTodos((prevTodos) =>\n      prevTodos.map((todo) => {\n        if (todo.id !== id) {\n          return todo;\n        }\n        return { ...todo, isEdit };\n      })\n    );\n  };\n\n  return (/* ... */)\n}\n")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u5c07 ",Object(i.b)("inlineCode",{parentName:"li"},"updateIsEdit")," \u65b9\u6cd5\u5f9e ",Object(i.b)("inlineCode",{parentName:"li"},"App")," \u50b3\u5165 ",Object(i.b)("inlineCode",{parentName:"li"},"Todos")," \u5f8c\uff0c\u518d\u5f9e ",Object(i.b)("inlineCode",{parentName:"li"},"Todos")," \u50b3\u5165 `TodoItem"),Object(i.b)("li",{parentName:"ul"},"\u5728 ",Object(i.b)("inlineCode",{parentName:"li"},"task-item")," \u900f\u904e ",Object(i.b)("inlineCode",{parentName:"li"},"clsx")," \u6dfb\u52a0 edit \u7684\u6a23\u5f0f")),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx",metastring:'{6,12} title="src/components/TodoItem.js"',"{6,12}":!0,title:'"src/components/TodoItem.js"'}),"const TodoItem = ({ todo, handleDelete, handleToggleIsDone, updateIsEdit }) => {\n  return (\n    <div\n      className={clsx('task-item', {\n        done: todo.isDone,\n        edit: todo.isEdit,\n      })}\n    >\n      {/* ... */}\n      <div\n        className=\"task-item-body\"\n        onDoubleClick={() => updateIsEdit({ id: todo.id, isEdit: true })}\n      >\n        {/* ... */}\n      </div>\n    </div>\n  );\n};\n")),Object(i.b)("h2",{id:"\u53d6\u5f97\u4f7f\u7528\u8005\u8f38\u5165\u7684\u5167\u5bb9"},"\u53d6\u5f97\u4f7f\u7528\u8005\u8f38\u5165\u7684\u5167\u5bb9"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx",metastring:'{8,10-12,21} title="src/components/TodoItem.js"',"{8,10-12,21}":!0,title:'"src/components/TodoItem.js"'}),'const TodoItem = ({\n  todo,\n  handleDelete,\n  handleSave,\n  handleToggleIsDone,\n  updateIsEdit,\n}) => {\n  const [tempTodo, setTempTodo] = useState(todo.title);\n\n  const handleChange = (e) => {\n    setTempTodo(e.target.value);\n  };\n\n  return (\n      {/* ... */}\n        <input\n          className="task-item-body-input"\n          type="text"\n          placeholder="\u65b0\u589e\u5de5\u4f5c"\n          value={tempTodo}\n          onChange={handleChange}\n          onKeyDown={handleKeyDown}\n        />\n      {/* ... */}\n  );\n};\n')),Object(i.b)("h2",{id:"\u53d6\u5f97\u4f7f\u7528\u8005\u9ede\u64ca\u7684\u6309\u9375"},"\u53d6\u5f97\u4f7f\u7528\u8005\u9ede\u64ca\u7684\u6309\u9375"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx",metastring:'{5,40} title="/src/component/TodoItem"',"{5,40}":!0,title:'"/src/component/TodoItem"'}),'const TodoItem = ({\n  // ...\n}) => {\n  // ...\n  const handleKeyDown = (event) => {\n    console.log({\n      keyCode: event.keyCode,\n      key: event.key,\n    });\n\n    // keyCode 13 \u4e00\u5b9a\u662f enter\uff0c\u4f46 enter \u7684 keyCode \u4e0d\u4e00\u5b9a\u662f 13\n    if (event.keyCode === 13 && tempTodo.length !== 0) {\n      //\n    }\n\n    // keyCode 27 \u662f Escape\n    if (event.keyCode === 27) {\n      //\n    }\n  };\n\n  return (\n    {/* ... */}\n    <input\n      className="task-item-body-input"\n      type="text"\n      placeholder="\u65b0\u589e\u5de5\u4f5c"\n      value={tempTodo}\n      onChange={handleChange}\n      onKeyDown={handleKeyDown}\n    />\n    {/* ... */}\n  );\n};\n')),Object(i.b)("h2",{id:"\u4fdd\u5b58\u7de8\u8f2f"},"\u4fdd\u5b58\u7de8\u8f2f"),Object(i.b)("p",null,"\u5728 ",Object(i.b)("inlineCode",{parentName:"p"},"App.js")," \u4e2d\u64b0\u5beb ",Object(i.b)("inlineCode",{parentName:"p"},"handleSave")," \u65b9\u6cd5\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="src/App.js"',title:'"src/App.js"'}),"const App = () => {\n  const handleSave =  (payload) => {\n    const { id, title } = payload;\n\n    setTodos((prevTodos) =>\n      prevTodos.map((todo) => {\n        if (todo.id !== id) {\n          return todo;\n        }\n        return { ...todo, title, isEdit: false };\n      })\n    );\n  };\n\n  return (/* ... */)\n}\n")),Object(i.b)("p",null,"\u5728 ",Object(i.b)("inlineCode",{parentName:"p"},"TodoItem")," \u7684 ",Object(i.b)("inlineCode",{parentName:"p"},"handleKeyDown")," \u4e2d\u547c\u53eb ",Object(i.b)("inlineCode",{parentName:"p"},"handleSave"),"\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="src/components/TodoItem.js"',title:'"src/components/TodoItem.js"'}),"const TodoItem = ({/* ... */}) => {\n  // ...\n  const handleKeyDown = (event) => {\n\n    // keyCode 13 \u4e00\u5b9a\u662f enter\uff0c\u4f46 enter \u7684 keyCode \u4e0d\u4e00\u5b9a\u662f 13\n    if (event.keyCode === 13 && tempTodo.length !== 0) {\n      handleSave({\n        id: todo.id,\n        title: tempTodo,\n      });\n    }\n\n   // ...\n  };\n\n  return (/* ... */)\n};\n")),Object(i.b)("h2",{id:"\u53d6\u6d88\u7de8\u8f2f"},"\u53d6\u6d88\u7de8\u8f2f"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u900f\u904e ",Object(i.b)("inlineCode",{parentName:"li"},"updateIsEdit()")," \u628a isEdit \u6539\u56de ",Object(i.b)("inlineCode",{parentName:"li"},"false")),Object(i.b)("li",{parentName:"ul"},"\u900f\u904e ",Object(i.b)("inlineCode",{parentName:"li"},"setTempTodo")," \u5fa9\u539f title")),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx",metastring:'title="src/components/TodoItem.js"',title:'"src/components/TodoItem.js"'}),"const TodoItem = ({/* ... */}) => {\n  // ...\n  const handleKeyDown = (event) => {\n\n   // keyCode 27 \u662f Escape\n    if (event.keyCode === 27) {\n      // \u53d6\u6d88\u5132\u5b58\n      updateIsEdit({\n        id: todo.id,\n        isEdit: false,\n      });\n\n      // \u628a tempTodo \u6539\u6210\u4fee\u6539\u524d\u7684\u5167\u5bb9\n      setTempTodo(todo.title);\n    }\n\n   // ...\n  };\n\n  return (/* ... */)\n};\n")))}l.isMDXComponent=!0},186:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return u}));var o=t(0),a=t.n(o);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=a.a.createContext({}),l=function(e){var n=a.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):d(d({},n),e)),t},p=function(e){var n=l(e.components);return a.a.createElement(s.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},m=a.a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,r=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=l(t),m=o,u=p["".concat(r,".").concat(m)]||p[m]||b[m]||i;return t?a.a.createElement(u,d(d({ref:n},s),{},{components:t})):a.a.createElement(u,d({ref:n},s))}));function u(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,r=new Array(i);r[0]=m;var d={};for(var c in n)hasOwnProperty.call(n,c)&&(d[c]=n[c]);d.originalType=e,d.mdxType="string"==typeof e?e:o,r[1]=d;for(var s=2;s<i;s++)r[s]=t[s];return a.a.createElement.apply(null,r)}return a.a.createElement.apply(null,t)}m.displayName="MDXCreateElement"}}]);